# Securing TCP IP
## Making TCP/IP Secure
### 1. **Introduction to Network Security**
   - **Security Focus in Networking**
     - **Overview**: Transitioning from building basic networks to emphasizing security.
     - **Objective**: Protecting networks from potential threats and ensuring secure data transmission.

### 2. **CIA Triad in Network Security**
   - **Confidentiality**
     - **Definition**: Ensuring that sensitive information is accessible only to those authorized to view it.
     - **Key Concept**: Encryption to protect data during transmission.
   - **Integrity**
     - **Definition**: Maintaining the accuracy and reliability of data.
     - **Key Concept**: Non-repudiation and tools like certificates and hashes to verify data integrity.
   - **Availability**
     - **Definition**: Ensuring that network resources are available to users when needed.
     - **Key Concept**: High availability systems and backup solutions to prevent downtime.

### 3. **Encryption and Confidentiality**
   - **Purpose of Encryption**
     - **Definition**: Transforming data into a secure format to prevent unauthorized access.
     - **Future Topics**: Exploration of different encryption methods and their applications.

### 4. **Ensuring Data Integrity**
   - **Non-Repudiation**
     - **Definition**: Ensuring that data is received from a legitimate source and has not been altered.
     - **Tools and Methods**: Certificates and hashing techniques to validate data integrity during transmission.

### 5. **Maintaining Network Availability**
   - **High Availability**
     - **Definition**: Ensuring that network services and resources are consistently operational.
     - **Implementation**: Use of redundant systems and backup strategies to maintain service availability.
   - **Backups**
     - **Purpose**: Creating copies of data to restore it in case of data loss or corruption.

### 6. **Authentication and Authorization**
   - **Authentication**
     - **Definition**: The process of verifying the identity of a user or device.
     - **Examples**: Use of usernames, passwords, smart cards, and other credentials.
   - **Authorization**
     - **Definition**: Determining what an authenticated user is allowed to do on the network.
     - **Implementation**: Setting permissions and access controls based on user roles.

### 7. **Preparing for Network Security Implementation**
   - **Security Mindset**
     - **Approach**: Adopting a proactive approach to network security by anticipating and mitigating risks.
   - **Frameworks**
     - **CIA Triad**: The foundational model for information security focusing on Confidentiality, Integrity, and Availability.
     - **AAA (Authentication, Authorization, Accounting)**: An extension of security principles ensuring proper user management and access control.
## Symmetric Encryption
### 1. **Introduction to Encryption**
   - **Importance of Encryption**
     - **Overview**: Encryption is essential in various aspects of computing, including securing hard drives, emails, and video content.
     - **Purpose**: Ensuring that data remains confidential and secure from unauthorized access.

### 2. **Basic Encryption Example**
   - **Caesar Cipher**
     - **Explanation**: An early and simple form of encryption where each letter in the plaintext is shifted by a fixed number of positions in the alphabet.
     - **Example**: Shifting each letter by three positions in "ilovemikemeyersnetworkplus" results in a basic encrypted text.

### 3. **Introduction to Modern Encryption**
   - **Complexity in Encryption**
     - **Enhancing Encryption**: Using more sophisticated algorithms beyond simple ciphers, with keys that add complexity to the encryption process.
     - **Example with Key**: Using a key (e.g., `32167594`) repeatedly applied to the plaintext, combined with a Caesar-like shift, to produce a more secure ciphertext.

### 4. **Encryption Process**
   - **Encryption Components**
     - **Cleartext**: The original, unencrypted data, which can be any form of information (e.g., text, phone conversation, document).
     - **Ciphertext**: The encrypted form of the cleartext after it has been processed by the algorithm using the key.
   - **Algorithm and Key**
     - **Definition**: An algorithm is the set of rules that defines how to encrypt and decrypt the data, and the key is the variable that makes the encryption unique.
     - **Process**: Cleartext is run through the algorithm with a key to produce ciphertext. The same key is required to decrypt the ciphertext back into cleartext.

### 5. **Symmetric Encryption**
   - **Symmetric Key Encryption**
     - **Definition**: A type of encryption where the same key is used for both encryption and decryption.
     - **Practical Example**: Commonly used in wireless networks with encryption standards like RC4 or AES, where the encryption and decryption processes are automatically managed.

### 6. **Key Points in Encryption**
   - **Summary of Encryption Elements**
     - **Key Components**: Every encryption process involves cleartext, ciphertext, an algorithm, and a key.
     - **Key Challenge**: In symmetric encryption, securely sharing the key with the intended recipient is crucial for decryption.

## Asymmetric Encryption
### 1. **Introduction to Encryption Issues**
   - **Symmetric Encryption Limitation**
     - **Problem**: In symmetric encryption, the same key is used for both encryption and decryption. This key must be shared between parties, which can lead to security vulnerabilities if intercepted.

### 2. **Asymmetric Encryption**
   - **Overview of Asymmetric Encryption**
     - **Creators**: Developed by Rivest, Shamir, and Adleman, the creators of the RSA encryption algorithm.
     - **Key Difference**: Unlike symmetric encryption, asymmetric encryption uses two keys—a public key and a private key.

### 3. **Public and Private Keys**
   - **Public Key**
     - **Function**: Used to encrypt data. Once data is encrypted with a public key, it can only be decrypted by the corresponding private key.
     - **Security**: Public keys can be shared openly because they only allow encryption, not decryption.
   - **Private Key**
     - **Function**: Used to decrypt data that has been encrypted with the corresponding public key.
     - **Security**: Private keys must be kept secure and are typically stored in an encrypted folder or another secure form of storage.

### 4. **Key Exchange Process**
   - **Key Exchange**
     - **Definition**: The process by which two parties exchange their public keys. Each party can then use the other’s public key to encrypt messages that only the intended recipient’s private key can decrypt.
     - **Example**: Mike sends his public key to another party, who then uses it to encrypt a message. Mike can decrypt the message using his private key.

### 5. **Practical Considerations in Asymmetric Encryption**
   - **Public Key Storage**
     - **Usage**: Public keys are often stored locally or in online repositories, making it easy to encrypt data for multiple recipients.
   - **Key Pair Concept**
     - **Remember**: Always think of asymmetric encryption in terms of key pairs: the public key encrypts, and the private key decrypts.

## Cryptographic Hashes
### 1. **Introduction to Hashing**
   - **Purpose of Hashing**
     - **Definition**: Hashing is a process used to verify data integrity, ensuring that data has not been altered during transmission or storage.
     - **Comparison**: Unlike encryption, which hides data, hashing is about ensuring data consistency.

### 2. **How Hashing Works**
   - **Fixed Output Size**
     - **Process**: A hash algorithm takes an input (e.g., a text file) and produces a fixed-size string, typically a hexadecimal value.
     - **Example**: Regardless of the input size, the output hash (e.g., 128-bit or 32 hexadecimal values) remains consistent in length.
   - **Sensitivity to Changes**
     - **Example**: Even a minor change in the input (like altering one letter) results in a completely different hash output, making it easy to detect alterations.

### 3. **Common Hash Algorithms**
   - **MD5 (Message Digest Algorithm 5)**
     - **Usage**: Widely used for generating a 128-bit hash value, though it's less secure by modern standards.
   - **SHA-1 (Secure Hash Algorithm 1)**
     - **Usage**: Produces a 160-bit hash value; still common but being phased out due to vulnerabilities.
   - **SHA-2 Family**
     - **Variants**: Includes SHA-256, SHA-384, and others. These are more secure and are becoming the standard in many applications.

### 4. **Practical Application of Hashes**
   - **Verifying Downloads**
     - **Scenario**: When downloading large files (e.g., an ISO image), the publisher provides a hash value. After downloading, users can generate a hash of the file and compare it to the provided hash to ensure the file's integrity.
   - **Example**: Downloading an Ubuntu Linux distribution, users can check the MD5 or SHA-1 hash provided by Ubuntu to ensure their download is complete and unaltered.

### 5. **Tools for Hashing**
   - **Online Hash Generators**
     - **Function**: Allows users to generate hash values for any input directly from a web interface.
     - **Example**: Users can input text and instantly see hash outputs for various algorithms (e.g., MD5, SHA-1).
   - **Changes in Hash Output**
     - **Demonstration**: Changing even a single character in the input results in a dramatically different hash output, emphasizing the hash's sensitivity to changes.
## Identification
### 1. **Introduction to Identity Management**
   - **Purpose of Identity Management**
     - **Definition**: Identity management in IT security ensures that only authorized individuals have access to network resources by verifying their identity and controlling their access rights.
   - **Key Concepts**
     - **Authentication**: Verifying a user's identity, typically through something they know (e.g., password).
     - **Authorization**: Determining what authenticated users are allowed to do once they access the system.

### 2. **The Process of Authentication**
   - **Identification**
     - **Definition**: Identifying the user, usually through a username or other unique identifier.
     - **Example**: A user logging in with a username.
   - **Authentication**
     - **Definition**: Confirming that the user is who they claim to be, typically with a password.
     - **Example**: Entering a password after providing a username.
   - **Authorization**
     - **Definition**: Defining what actions the authenticated user is allowed to perform.
     - **Example**: Permissions to read, write, or delete files on a server.

### 3. **Analogy: Ticket to a Show**
   - **Identification and Authentication**
     - **Scenario**: Using a driver's license for identification and a confirmation number for authentication when picking up tickets for a show like Hamilton.
   - **Authorization**
     - **Scenario**: The ticket grants the user authorization to sit in a specific seat at the show.

### 4. **Multifactor Authentication (MFA)**
   - **Definition**: Using more than one method to authenticate a user to increase security.
   - **Three Main Factors of MFA**
     - **Something You Know**: Examples include passwords or PIN codes.
     - **Something You Have**: Examples include smart cards, RSA tokens, or mobile devices.
     - **Something You Are**: Examples include biometrics like fingerprints or facial recognition.

### 5. **Attributes of Multifactor Authentication**
   - **Additional MFA Attributes**
     - **Something You Can Do**: Example includes a signature or typing speed.
     - **Someone You Know (Trusts)**: Example includes certificates or trust relationships with servers.
     - **Somewhere You Are**: Example includes location-based authentication, like entering a zip code at a gas station when using a credit card.

### 6. **Example: Multifactor Authentication in Action**
   - **Scenario**: Using a credit card at a gas station involves location-based authentication by entering a zip code.
   - **Security Consideration**: If the transaction occurs in an unexpected location, the credit card company may block the transaction or call the cardholder.
## Access Control
### 1. **Introduction to Access Control in Networking**
   - **Access Control Basics**
     - **Definition**: Access control determines who can access resources on a network and what they can do with those resources.
     - **Key Concepts**:
       - **Authentication**: The process of verifying a user’s identity before allowing access to the network or resources (e.g., usernames, passwords, certificates, RSA tokens, smart cards, retinal scanners).
       - **Authorization**: Once authenticated, determining what actions the user is allowed to perform on the network or resource.

### 2. **Access Control Lists (ACLs)**
   - **Definition**: An access control list (ACL) is a list that specifies who can access a particular resource and what actions they can perform.
   - **Examples of ACLs**:
     - **Computer ACLs**: Usernames, passwords, and permissions on folders.
     - **Wireless Network ACLs**: Passwords, channels, and device permissions.
     - **Internet Connectivity ACLs**: Blocking or allowing specific port numbers.

### 3. **Types of Access Control**
   - **Mandatory Access Control (MAC)**
     - **Definition**: Access is determined by labels (e.g., top secret) assigned to resources. Only users with the appropriate clearance can access the resource.
     - **Origin**: Primarily used in military settings; allows or denies access based on the security level of the resource.
   - **Discretionary Access Control (DAC)**
     - **Definition**: Access is determined by the owner of the resource, who can assign different permissions to other users (e.g., read, write, or execute).
     - **Flexibility**: Allows more specific and varied control over who can access and modify resources compared to MAC.
   - **Role-Based Access Control (RBAC)**
     - **Definition**: Access is based on the roles assigned to users, which are then linked to specific permissions on resources.
     - **Groups**: Users are organized into groups, and permissions are assigned to these groups, making it easier to manage and enforce access policies.
     - **Example**: In Microsoft Windows, the best practice is to place users into groups and then assign rights and permissions to those groups.
## AAA
### 1. **Introduction to RADIUS and TACACS+**
   - **RADIUS (Remote Authentication Dial-In User Service)**
     - **Definition**: RADIUS is a protocol that provides centralized Authentication, Authorization, and Accounting (AAA) for users trying to access a network.
     - **Components**:
       - **RADIUS Server**: A system running RADIUS software (e.g., Microsoft IAS, Open RADIUS).
       - **RADIUS Client**: The intermediary that forwards authentication requests from the supplicant (e.g., a wireless access point).
       - **Supplicant**: The user or device (e.g., laptop, smartphone) trying to gain access to the network.
   - **TACACS+ (Terminal Access Controller Access-Control System Plus)**
     - **Definition**: A proprietary Cisco protocol designed for AAA, particularly for managing routers and switches in large networks.
     - **Components**:
       - **TACACS+ Client**: Typically a router or switch in a network.
       - **TACACS+ Server**: A centralized server that handles authentication, authorization, and accounting for network devices.

### 2. **RADIUS Protocol Details**
   - **Functionality**:
     - **Authentication**: Verifies the identity of the user or device.
     - **Authorization**: Determines what resources the user or device can access.
     - **Accounting**: Logs and tracks user activities for auditing purposes.
   - **Ports**:
     - **UDP Ports**: 1812/1813 (most common) or 1645/1646.
   - **Integration**: Can authenticate against external databases, such as Windows domain controllers.

### 3. **TACACS+ Protocol Details**
   - **Functionality**:
     - **Authentication**: Authenticates users for network devices like routers and switches.
     - **Authorization**: Determines access levels for users on network devices.
     - **Accounting**: Logs the activities of users on network devices.
   - **Ports**:
     - **TCP Port**: 49.
   - **Usage**: Primarily used in environments with a large number of network devices, particularly Cisco products.

### 4. **Key Differences Between RADIUS and TACACS+**
   - **Transport Protocol**:
     - **RADIUS**: Uses UDP.
     - **TACACS+**: Uses TCP.
   - **Usage Scenarios**:
     - **RADIUS**: Commonly used in wireless networks for authenticating users trying to access the network.
     - **TACACS+**: Primarily used for managing and securing access to network devices like routers and switches.
   - **Supplicant Role**:
     - **RADIUS**: Involves a supplicant (e.g., user or device trying to connect).
     - **TACACS+**: Focuses more on network administrators managing devices rather than end-user access.
## Kerberos/EAP
### 1. **Introduction to Authentication Protocols**
   - **PPP (Point-to-Point Protocol)**
     - **Definition**: PPP was designed for dial-up and remote connections, providing basic authentication mechanisms.
   - **Kerberos**
     - **Definition**: Kerberos is a network authentication protocol designed for wired local area networks, particularly within Windows domains.

### 2. **Kerberos Authentication Process**
   - **Components**:
     - **Key Distribution Center (KDC)**: Includes the Authentication Service and the Ticket Granting Service.
     - **Client (Windows Client)**: A device running a Windows OS, like Windows 7 or 8.
     - **Server (Windows Server)**: A server running a version of Windows Server (e.g., Server 2008, 2012).
   - **Process**:
     - The client sends a hash of its username and password to the Authentication Service.
     - The Authentication Service returns a Ticket Granting Ticket (TGT) to the client.
     - The client timestamps the TGT and sends it to the Ticket Granting Service, which returns a token.
     - The client uses this token to access resources within the domain for a specified time (e.g., 8 hours).

### 3. **Kerberos Advantages and Challenges**
   - **Advantages**:
     - **Single Sign-On**: Once authenticated, the token allows access to multiple resources without re-authentication.
   - **Challenges**:
     - **Cost**: Requires a Windows Server license.
     - **Time Sensitivity**: Kerberos relies heavily on synchronized system clocks to prevent man-in-the-middle attacks.

### 4. **EAP (Extensible Authentication Protocol)**
   - **Definition**: EAP is a flexible authentication framework used to support various authentication methods in network access.
   - **Functionality**:
     - **Flexibility**: EAP acts as an envelope, allowing different authentication methods to be negotiated and used between devices.
   - **Common EAP Methods**:
     - **EAP-PSK**: Uses a pre-shared key for authentication.
     - **EAP-PEAP**: Utilizes a standard username and password.
     - **EAP-MD5**: Employs a hash for authentication (less common).
     - **EAP-TLS**: Uses certificates for authentication, requiring a certificate on the server side.
     - **EAP-TTLS**: Requires certificates on both the server and client sides.

### 5. **Comparison of Kerberos and EAP**
   - **Kerberos**:
     - Primarily used in wired networks, especially within Windows domains.
   - **EAP**:
     - Widely used in wireless networks for flexible authentication, though it hasn't fully replaced Kerberos in wired networks.


## Single Sign-On
### 1. **Introduction to Single Sign-On (SSO)**
   - **Definition**: Single Sign-On (SSO) allows a user to log in once and gain access to multiple systems without needing to log in again for each system.

### 2. **Challenges with Traditional Authentication**
   - **Multiple Accounts**: In traditional Windows workgroups, each host has its own username and password list, leading to difficulties in managing multiple accounts across different computers.
   - **Security Risks**: Using the same username and password on multiple systems can be convenient but poses significant security risks.

### 3. **Single Sign-On in Local Area Networks (LAN)**
   - **Windows Active Directory (AD)**:
     - **Definition**: The gold standard for single sign-on in LAN environments.
     - **Setup**: Requires purchasing and installing Windows Server, setting up a domain, and joining computers to the domain.
     - **Federated Systems**: Involves establishing trust among all joined computers within the domain.
     - **Cross-Platform Compatibility**: Supports Apple and Linux systems through Windows file sharing or Samba, enabling them to join the domain.
   
### 4. **Single Sign-On for Web Applications**
   - **SAML (Security Assertion Markup Language)**:
     - **Definition**: SAML is designed primarily for web applications, allowing secure access to multiple web apps through a single login.
     - **Components**:
       - **Identity Provider**: The system where the user logs in, which then provides a token for access.
       - **Service Providers**: The web applications that the user wants to access using the token from the Identity Provider.
   - **Example**: 
     - **Scenario**: Managing an oil pipeline with various web-enabled devices (e.g., pumps, thermometers, cameras) that require secure access.
     - **Process**: The user logs into the Identity Provider, which then allows access to all connected web apps (service providers) without needing to log in again for each one.

### 5. **Practical Demonstration of SAML**
   - **SSOcircle**: 
     - **Description**: A service that demonstrates SAML-based single sign-on.
     - **Process**: 
       - User logs into SSOcircle (Identity Provider).
       - User can then access various service providers (e.g., Salesforce.com) without additional logins.
       - **Automatic Login**: SAML enables automatic login to connected web apps and provides an option to log out from one or all apps simultaneously.

### 6. **Comparison and Use Cases**
   - **Windows Active Directory (LAN)**: Best suited for local area networks where file and folder sharing is needed.
   - **SAML (Web Apps)**: Ideal for widespread systems such as SCADA systems or environments requiring access to multiple web apps.
## Certificates and Trust
### 1. **Introduction to Asymmetric Encryption**
   - **Key Pair**: Asymmetric encryption involves generating a pair of keys— a public key and a private key.
   - **Public Key Distribution Issue**: The challenge lies in ensuring that the public key received by the client truly belongs to the intended server.

### 2. **Digital Signatures**
   - **Purpose**: Digital signatures ensure that the public key came from the legitimate holder of the private key.
   - **Process**:
     - The server hashes its data (e.g., a webpage).
     - The hash is then encrypted with the server's private key, creating a digital signature.
     - This digital signature is sent alongside the public key to the client.
     - The client uses the public key to decrypt the signature and compares the resulting hash with its own hash of the data. If they match, the public key is verified as authentic.

### 3. **The Role of Digital Certificates**
   - **Problem with Direct Key Exchange**: Even with a digital signature, a client can't be sure that the server is who it claims to be without a trusted third party.
   - **Solution**: A third-party entity, trusted by both the client and server, signs the public key and digital signature, creating a digital certificate.
   - **Content of a Digital Certificate**: Includes the server’s public key, the server’s digital signature, and the third-party’s digital signature.
   - **Certificate Distribution**: Digital certificates are distributed instead of raw public keys to ensure authenticity.

### 4. **Trust Models**
   - **Unsigned Certificates**:
     - **Definition**: Self-generated certificates without a third-party verification.
     - **Use Case**: Suitable for environments where mutual trust exists, such as within an organization.
   - **Web of Trust**:
     - **Definition**: A decentralized model where individuals sign each other's certificates based on personal trust.
     - **Challenges**: Requires extensive manual work to maintain trust relationships, limiting its widespread use.
   - **Public Key Infrastructure (PKI)**:
     - **Definition**: A hierarchical trust model involving Certificate Authorities (CAs) at the top, issuing trusted certificates.
     - **Structure**:
       - **Certificate Authorities (CAs)**: Trusted entities like Verisign that issue certificates.
       - **Intermediate CAs**: Help distribute the load of certificate issuance.
       - **Users**: The end entities using the certificates.
     - **Use Case**: The standard for securing internet communications, especially in e-commerce.
## Certificate Error Scenarios
### 1. **Common Certificate Issues**
   - **Overview**: SSL certificate errors are common when browsing the web and can prevent secure HTTPS connections.

### 2. **Self-Signed Certificates**
   - **Definition**: A certificate signed by the same entity that it certifies, not by a trusted third-party Certificate Authority (CA).
   - **Identification**:
     - Check the certificate in the browser’s security details.
     - The certification path will show no trusted root or intermediate authority, indicating it is self-signed.
   - **Browser Warning**: Browsers will display a warning but allow users to proceed if they trust the certificate.

### 3. **Expired Certificates**
   - **Issue**: Certificates have an expiration date, and if not renewed, they will cause an error.
   - **Identification**:
     - Inspect the certificate in the browser or via local certificate management tools.
     - The expiration date will be clearly marked.
   - **Impact**: Access to the site is blocked until the certificate is renewed.

### 4. **Revoked Certificates**
   - **Issue**: A certificate can be revoked by the issuing Certificate Authority due to various reasons, such as compromise or loss of trust.
   - **Verification Methods**:
     - **CRL (Certificate Revocation List)**: A list maintained by CAs of all revoked certificates.
     - **OCSP (Online Certificate Status Protocol)**: A protocol used to query the CA about the status of a specific certificate.
   - **Browser Settings**:
     - Example: Firefox has an option to query OCSP servers to check the validity of certificates.
     - Leaving this option enabled provides additional security, though it may slightly impact speed.

### 5. **Importance of Reading Error Messages**
   - **Best Practice**: Always read the error messages presented by the browser.
   - **Benefit**: Error messages typically indicate the exact problem, which can help determine the appropriate course of action to resolve it.
